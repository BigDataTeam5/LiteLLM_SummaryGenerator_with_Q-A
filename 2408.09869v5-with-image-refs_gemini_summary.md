This technical report introduces Docling, an open-source Python package for converting PDF documents into machine-processable formats like JSON or Markdown.  The core purpose is to address the long-standing challenge of converting PDFs—known for their variability and lack of standardization—into formats suitable for modern AI applications like retrieval-augmented generation (RAG).

Docling achieves this using state-of-the-art AI models: DocLayNet for layout analysis and TableFormer for table structure recognition.  It's designed for efficiency, running on commodity hardware with a small resource footprint and offering options for batch or interactive processing, and leveraging various accelerators (GPU, MPS).

**Key Features:**

*   Converts PDFs to JSON or Markdown.
*   Understands page layout, reading order, and locates figures and tables.
*   Extracts metadata (title, authors, references, language).
*   Includes optional OCR for scanned PDFs.
*   Configurable for batch or interactive modes.
*   Supports various accelerators.

**Processing Pipeline:**

Docling uses a linear pipeline (illustrated in Figure 1):

1.  **PDF Parsing:** Extracts text and coordinates, renders page bitmaps using a custom-built parser (docling-parse) or pypdfium as alternatives.
2.  **AI Model Pipeline:** Applies DocLayNet (layout analysis) and TableFormer (table structure recognition) models.  Layout analysis uses ONNX Runtime, while TableFormer uses PyTorch.  OCR (using EasyOCR) is optional.
3.  **Post-processing:** Aggregates page results, augments metadata, infers reading order, and assembles a typed document object.
4.  **Output:** Serializes to JSON or Markdown.

**AI Models:**

*   **DocLayNet:** An object detector trained on a human-annotated dataset, predicting bounding boxes and classes of page elements.
*   **TableFormer:** A vision-transformer model for table structure recovery, handling complex table characteristics.

**Performance (Table 1):**

Performance tests on a 225-page dataset showed varying processing speeds and memory usage depending on the PDF backend (native or pypdfium) and thread count (4 or 16).  The native backend generally had higher memory usage but slightly faster processing times than pypdfium.  The Apple M3 Max system consistently outperformed the Intel Xeon E5-2690 system.  GPU acceleration is planned for future releases.

| CPU                   | Thread Budget | Native Backend TTS (s) | Native Backend Pages/s | Native Backend Mem (GB) | Pypdfium Backend TTS (s) | Pypdfium Backend Pages/s | Pypdfium Backend Mem (GB) |
|-----------------------|----------------|------------------------|------------------------|-----------------------|-------------------------|-------------------------|-------------------------|
| Apple M3 Max          | 4               | 177                      | 1.27                     | 6.20                    | 103                       | 2.18                      | 2.56                      |
| Apple M3 Max          | 16              | 167                      | 1.34                     | 6.20                    | 92                        | 2.45                      | 2.56                      |
| Intel(R) Xeon E5-2690 | 4               | 375                      | 0.60                     | 6.16                    | 239                       | 0.94                      | 2.42                      |
| Intel(R) Xeon E5-2690 | 16              | 244                      | 0.92                     | 6.16                    | 143                       | 1.57                      | 2.42                      |


**Applications:**

Docling's output is suitable for various applications, including:

*   Enterprise document search.
*   Passage retrieval and classification.
*   Knowledge extraction pipelines.
*   Retrieval-augmented generation (RAG) using the companion package `quackling`.
*   Creating document-derived datasets.
*   Automated knowledge-base construction.
*   Integration with IBM data prep kit.

**Future Work:**

Future development includes adding models for figure, equation, and code recognition, improving GPU acceleration, and enhancing the native PDF backend.  The authors encourage community contributions.

**Images:**

The document includes several images:

*   **Figure 1:** A diagram illustrating Docling's processing pipeline.
*   **Figure 1 (repeated):** Examples of complex page layouts from the DocLayNet dataset.
*   **Figure 2:** A comparison of a PDF page and its Markdown rendering by Docling.
*   **Figure 3:** Another example of Docling's Markdown output.
*   **Figure 5:** A learning curve showing the performance of a Mask R-CNN model trained on increasing fractions of the DocLayNet dataset.
*   Additional images showing examples of pages from various document types and illustrating the annotation process for the DocLayNet dataset.  These images visually demonstrate the diversity of document layouts handled by Docling.

**Tables:**

*   **Table 1:** Summarizes the DocLayNet dataset, showing the count and percentage of each class label in the training, testing, and validation sets, along with inter-annotator agreement.
*   **Table 2:** Shows the prediction performance (mAP) of different object detection models on the DocLayNet test set.


The report concludes by encouraging community contributions and providing references to related work.
